# Test Design: Story 2.2 - Video Playback

**Date**: 2025-10-25
**Designer**: Quinn (Test Architect)
**Story**: Epic 2, Story 2.2 - Child Video Playback
**Story File**: `docs/stories/2.2.video-playback.md`

---

## Test Strategy Overview

### Summary Statistics

- **Total Test Scenarios**: 47
- **Unit Tests**: 18 (38%)
- **Integration Tests**: 19 (40%)
- **E2E Tests**: 10 (21%)

### Priority Distribution

- **P0 (Critical)**: 24 scenarios (51%) - Safety-critical watch tracking, state management, error handling
- **P1 (High)**: 18 scenarios (38%) - Core playback workflow, API integration
- **P2 (Medium)**: 5 scenarios (11%) - UX enhancements (fullscreen, controls)
- **P3 (Low)**: 0 scenarios - All features are important for child safety

### Test Level Rationale

This story follows a **defense-in-depth** strategy for safety-critical functionality:

1. **Unit Tests (38%)**: Focus on business logic isolation
   - Watch duration calculation
   - State transition logic
   - Error detection algorithms
   - Event handler behavior

2. **Integration Tests (40%)**: Validate component interactions
   - Database operations (watch history, availability updates)
   - API endpoint contracts
   - Service-to-service communication
   - State management across components

3. **E2E Tests (21%)**: Critical user journeys
   - Complete playback workflow
   - Error scenarios with visual feedback
   - State-based navigation
   - Accessibility and keyboard interactions

### Safety-Critical Coverage (TIER 1)

The following test scenarios are marked as **TIER 1** and MUST pass before deployment:

- **Watch History Integrity**: UTC timestamps, correct flags (manual_play/grace_play)
- **Duration Accuracy**: Actual watch time logged (not video total duration)
- **State Transitions**: Correct navigation based on daily limit state
- **Video Availability**: Global marking of ALL duplicate instances
- **Cancel Behavior**: ESC key must NOT log watch history

---

## Test Scenarios by Acceptance Criteria

### AC1: Clicking thumbnail opens full-screen video player

**Risk**: Player fails to initialize, child cannot watch videos
**Criticality**: High (core user journey)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-001 | Unit | P1 | Test `createPlayer()` initializes player instance | Pure function logic, validates player creation | `frontend/src/child/player.test.js` |
| 2.2-UNIT-002 | Unit | P1 | Test player creation with valid videoId | Input validation logic | `frontend/src/child/player.test.js` |
| 2.2-INT-001 | Integration | P1 | Test grid handleCardClick disables cards and shows player | Component interaction between grid and player | `tests/integration/test_video_playback.py` |
| 2.2-E2E-001 | E2E | P1 | Test clicking video card displays full-screen player | Critical user journey validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC2: YouTube IFrame Player API embedded for playback

**Risk**: YouTube API fails to load, no video playback possible
**Criticality**: High (core functionality)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-003 | Unit | P1 | Test YouTube IFrame API loading logic | Validates API script injection | `frontend/src/child/player.test.js` |
| 2.2-UNIT-004 | Unit | P1 | Test player waits for `onYouTubeIframeAPIReady` callback | Async API initialization logic | `frontend/src/child/player.test.js` |
| 2.2-INT-007 | Integration | P1 | Test player initializes with YouTube API | API integration verification | `tests/integration/test_video_playback.py` |
| 2.2-E2E-002 | E2E | P1 | Test YouTube IFrame loads with correct videoId in src | Visual verification of API integration | `tests/e2e/specs/video-playback.spec.js` |

---

### AC3: Player fills entire screen with minimal chrome

**Risk**: Poor viewing experience due to UI obstruction
**Criticality**: Medium (UX enhancement)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-005 | Unit | P2 | Test fullscreen detection and fallback logic | Branching logic for API support detection | `frontend/src/child/player.test.js` |
| 2.2-UNIT-006 | Unit | P2 | Test fallback applies 100vw/100vh styling | Style application logic | `frontend/src/child/player.test.js` |
| 2.2-E2E-003 | E2E | P2 | Test player fills entire viewport visually | Visual regression validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC4: "Back to Videos" button prominently displayed

**Risk**: Child cannot exit video (poor UX, potential frustration)
**Criticality**: Medium (UX/safety consideration)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-007 | Unit | P2 | Test back button element is created with correct attributes | DOM element creation logic | `frontend/src/child/player.test.js` |
| 2.2-E2E-004 | E2E | P2 | Test back button is visible and large enough for child interaction | Visual validation of child-friendly design | `tests/e2e/specs/video-playback.spec.js` |

---

### AC5: Video plays immediately on load (autoplay enabled)

**Risk**: Video doesn't start, child must manually interact
**Criticality**: High (core experience)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-008 | Unit | P1 | Test player configuration includes `autoplay=1` parameter | Configuration validation | `frontend/src/child/player.test.js` |
| 2.2-E2E-005 | E2E | P1 | Test video starts playing automatically after load | User experience validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC6: Player controls are child-friendly (large play/pause, volume)

**Risk**: Controls too small or complex for young children
**Criticality**: Medium (UX consideration)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-009 | Unit | P2 | Test player configuration includes `controls=1` parameter | Configuration validation | `frontend/src/child/player.test.js` |
| 2.2-E2E-006 | E2E | P2 | Test player controls are visible and child-friendly size | Visual validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC7: Video completes and returns to grid automatically

**Risk**: Child stuck on ended video, workflow breaks
**Criticality**: High (core workflow)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-010 | Unit | P1 | Test `onStateChange` handler detects `YT.PlayerState.ENDED` | Event handler logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-011 | Unit | P1 | Test handler calls watch logging API with `completed=true` | API call logic | `frontend/src/child/player.test.js` |
| 2.2-INT-008 | Integration | P1 | Test complete playback flow: watch logging → grid fetch → render | Multi-step workflow validation | `tests/integration/test_video_playback.py` |
| 2.2-INT-009 | Integration | P1 | Test grid fetches NEW random videos (not same as before) | Verify novelty algorithm works | `tests/integration/test_video_playback.py` |
| 2.2-E2E-007 | E2E | P1 | Test video completion returns to grid with different videos | Complete user journey validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC8: Back button and ESC key return to grid without reloading

**Risk**: Wrong behavior (ESC logging history, Back not logging)
**Criticality**: CRITICAL (safety - accurate time tracking)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-012 | Unit | P1 | Test back button click handler calls watch logging API | Event handler logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-013 | Unit | P1 | Test back button logs with `completed=false` and actual duration | Parameter validation | `frontend/src/child/player.test.js` |
| 2.2-UNIT-014 | Unit | P1 | Test back button navigates based on `dailyLimit.currentState` | Navigation logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-015 | Unit | **P0** | **[TIER 1]** Test ESC key handler does NOT call watch logging API | Safety-critical: cancelled playback must not count | `frontend/src/child/player.test.js` |
| 2.2-UNIT-016 | Unit | P1 | Test ESC key destroys player and returns to grid | Cleanup logic | `frontend/src/child/player.test.js` |
| 2.2-INT-010 | Integration | P1 | Test back button flow logs watch and returns to grid | Multi-component flow | `tests/integration/test_video_playback.py` |
| 2.2-INT-011 | Integration | **P0** | **[TIER 1]** Test ESC key flow does NOT create watch_history record | Safety-critical: DB must not have cancelled watches | `tests/integration/test_video_playback.py` |
| 2.2-E2E-008 | E2E | P1 | Test ESC key returns to grid without new videos | User journey validation | `tests/e2e/specs/video-playback.spec.js` |
| 2.2-E2E-009 | E2E | P1 | Test back button returns to grid with new videos | User journey validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC9: Video playback tracked via POST /api/videos/watch

**Risk**: Watch history not logged, time limits not enforced
**Criticality**: CRITICAL (safety - time limit enforcement)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-017 | Unit | P1 | Test duration calculation from start time to end time | Pure calculation logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-018 | Unit | P1 | Test watch API request formatting with correct parameters | Request validation | `frontend/src/child/player.test.js` |
| 2.2-INT-002 | Integration | **P0** | **[TIER 1]** Test watch logging creates history entry with correct UTC timestamp | Safety-critical: timestamps must be UTC | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-003 | Integration | **P0** | **[TIER 1]** Test `manual_play` and `grace_play` flags default to false | Safety-critical: normal playback must count toward limit | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-004 | Integration | **P0** | **[TIER 1]** Test partial watch (completed=false) logs actual duration | Safety-critical: accurate time tracking | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-005 | Integration | **P0** | **[TIER 1]** Test complete watch (completed=true) logs full duration | Safety-critical: accurate time tracking | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-006 | Integration | P1 | Test watch logging returns updated `dailyLimit` object | API contract validation | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-007 | Integration | P1 | Test invalid input returns 400 error | Error handling | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-008 | Integration | P1 | Test missing videoId returns 400 error | Input validation | `tests/backend/routes/test_watch_logging.py` |

---

### AC10: Error handling for failed video loads

**Risk**: Unavailable videos repeatedly shown, poor experience
**Criticality**: CRITICAL (safety - content quality)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-UNIT-019 | Unit | P1 | Test `onError` handler detects YouTube error codes 150/100 | Error detection logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-020 | Unit | P1 | Test error handler calls `/api/videos/unavailable` API | API call logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-021 | Unit | P1 | Test error handler shows mascot with Norwegian message | UI update logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-022 | Unit | P1 | Test auto-return timer triggers after 5 seconds | Timer logic | `frontend/src/child/player.test.js` |
| 2.2-UNIT-023 | Unit | P1 | Test buffering timeout detection (>30 seconds) | Timeout detection logic | `frontend/src/child/player.test.js` |
| 2.2-INT-012 | Integration | **P0** | **[TIER 1]** Test marking video unavailable updates ALL duplicate instances | Safety-critical: global availability flag | `tests/backend/routes/test_video_unavailable.py` |
| 2.2-INT-013 | Integration | **P0** | **[TIER 1]** Test unavailable videos do not appear in subsequent grid requests | Safety-critical: filter enforcement | `tests/backend/routes/test_video_unavailable.py` |
| 2.2-INT-014 | Integration | P1 | Test unavailable endpoint with invalid videoId returns 400 | Input validation | `tests/backend/routes/test_video_unavailable.py` |
| 2.2-INT-015 | Integration | P1 | Test idempotency: calling twice on same video is safe | API reliability | `tests/backend/routes/test_video_unavailable.py` |
| 2.2-E2E-010 | E2E | P1 | Test video unavailable shows mascot with "Oops! Det videoen gjemmer seg!" | User experience validation | `tests/e2e/specs/video-playback.spec.js` |
| 2.2-E2E-011 | E2E | P1 | Test network error shows "Videoene trenger internett" | User experience validation | `tests/e2e/specs/video-playback.spec.js` |

---

### AC11: State-based navigation after logging watched video

**Risk**: Child bypasses time limits, watches beyond allowed time
**Criticality**: CRITICAL (safety - time limit enforcement)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-INT-016 | Integration | **P0** | **[TIER 1]** Test state transitions: normal → winddown → grace → locked | Safety-critical: state machine correctness | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-017 | Integration | **P0** | **[TIER 1]** Test navigation to `/grace` when currentState is 'grace' | Safety-critical: grace screen enforcement | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-018 | Integration | **P0** | **[TIER 1]** Test navigation to `/goodbye` when currentState is 'locked' | Safety-critical: locked screen enforcement | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-019 | Integration | **P0** | **[TIER 1]** Test normal navigation to grid when state is 'normal' or 'winddown' | Safety-critical: correct workflow | `tests/integration/test_video_playback.py` |
| 2.2-E2E-012 | E2E | **P0** | **[TIER 1]** Test complete flow: watch videos until grace state | Safety-critical: state transition validation | `tests/e2e/specs/video-playback.spec.js` |
| 2.2-E2E-013 | E2E | **P0** | **[TIER 1]** Test complete flow: watch grace video until locked state | Safety-critical: final lock enforcement | `tests/e2e/specs/video-playback.spec.js` |

---

### AC12: Partial watch logging tracks actual viewing time

**Risk**: Inaccurate time tracking, wrong limit enforcement
**Criticality**: CRITICAL (safety - accurate time limits)

| ID | Level | Priority | Test Scenario | Justification | Test File |
|---|---|---|---|---|---|
| 2.2-INT-020 | Integration | **P0** | **[TIER 1]** Test partial watch logs actual watch time (not full video duration) | Safety-critical: accurate duration tracking | `tests/backend/routes/test_watch_logging.py` |
| 2.2-INT-021 | Integration | **P0** | **[TIER 1]** Test back button after 30 seconds logs ~30 seconds (not video length) | Safety-critical: real-time accuracy | `tests/integration/test_video_playback.py` |
| 2.2-E2E-014 | E2E | P1 | Test interrupted watch updates minutesWatched accurately | End-to-end accuracy validation | `tests/e2e/specs/video-playback.spec.js` |

---

## Safety-Critical Test Mapping (TIER 1)

The following 14 test scenarios are marked with `@pytest.mark.tier1` and MUST pass 100% before deployment:

### Watch History Integrity
- `2.2-INT-002`: UTC timestamp recorded
- `2.2-INT-003`: manual_play=false, grace_play=false for normal playback
- `2.2-INT-004`: Partial watch logs actual duration
- `2.2-INT-005`: Complete watch logs full duration
- `2.2-INT-020`: Partial watch duration accuracy verification
- `2.2-INT-021`: Back button duration accuracy (30s ≈ 30s)

### Cancel Behavior
- `2.2-UNIT-015`: ESC key does NOT call watch API
- `2.2-INT-011`: ESC key does NOT create watch_history record

### Video Availability
- `2.2-INT-012`: Unavailable marks ALL duplicate instances
- `2.2-INT-013`: Unavailable videos filtered from grid

### State Management
- `2.2-INT-016`: State transitions calculated correctly
- `2.2-INT-017`: Navigation to /grace when state is 'grace'
- `2.2-INT-018`: Navigation to /goodbye when state is 'locked'
- `2.2-INT-019`: Normal navigation for 'normal'/'winddown' states

### E2E State Validation
- `2.2-E2E-012`: Complete flow to grace state
- `2.2-E2E-013`: Complete flow to locked state

---

## Risk Coverage

### Risk 1: Time Limit Bypass
**Impact**: Child watches beyond allowed time
**Probability**: Medium
**Mitigation**:
- `2.2-INT-002` through `2.2-INT-006`: Watch logging accuracy
- `2.2-INT-016` through `2.2-INT-019`: State transition enforcement
- `2.2-UNIT-015`, `2.2-INT-011`: ESC key doesn't count toward limit
- `2.2-E2E-012`, `2.2-E2E-013`: End-to-end state validation

### Risk 2: Unavailable Videos Shown Repeatedly
**Impact**: Poor experience, child frustrated
**Probability**: Medium
**Mitigation**:
- `2.2-INT-012`: Global availability marking
- `2.2-INT-013`: Filter enforcement
- `2.2-E2E-010`: User-facing error handling

### Risk 3: Inaccurate Watch Duration
**Impact**: Wrong time limit calculations
**Probability**: Low (but high impact)
**Mitigation**:
- `2.2-INT-004`, `2.2-INT-005`: Duration logging accuracy
- `2.2-INT-020`, `2.2-INT-021`: Partial watch accuracy
- `2.2-UNIT-017`: Duration calculation logic

### Risk 4: Player Initialization Failure
**Impact**: No video playback possible
**Probability**: Low
**Mitigation**:
- `2.2-INT-007`: YouTube API integration
- `2.2-E2E-001`, `2.2-E2E-002`: Complete playback initialization

### Risk 5: Network Error Handling
**Impact**: Child stuck in error state
**Probability**: Medium
**Mitigation**:
- `2.2-UNIT-023`: Buffering timeout detection
- `2.2-E2E-011`: Network error user experience

---

## Recommended Execution Order

### Phase 1: P0 Unit Tests (Fail Fast)
Execute all 2 P0 unit tests first to catch logic errors immediately:
- `2.2-UNIT-015`: ESC key handler logic

**Expected Duration**: <5 seconds
**Failure Action**: Block development until fixed

### Phase 2: P0 Integration Tests (Core Validation)
Execute all 14 P0 integration tests to validate critical flows:
- `2.2-INT-002` through `2.2-INT-006`: Watch logging
- `2.2-INT-011`: ESC key database behavior
- `2.2-INT-012` through `2.2-INT-013`: Video availability
- `2.2-INT-016` through `2.2-INT-019`: State transitions
- `2.2-INT-020` through `2.2-INT-021`: Duration accuracy

**Expected Duration**: <30 seconds
**Failure Action**: Block deployment until fixed

### Phase 3: P0 E2E Tests (User Journey Validation)
Execute 2 P0 E2E tests to validate complete workflows:
- `2.2-E2E-012`: Flow to grace state
- `2.2-E2E-013`: Flow to locked state

**Expected Duration**: 2-5 minutes
**Failure Action**: Block deployment until fixed

### Phase 4: P1 Tests (Core Functionality)
Execute all 18 P1 tests in parallel:
- Unit: Player creation, API loading, event handlers
- Integration: Complete workflows, API contracts
- E2E: User journeys, visual validation

**Expected Duration**: 5-10 minutes
**Failure Action**: Fix before release candidate

### Phase 5: P2 Tests (UX Enhancement)
Execute all 5 P2 tests as time permits:
- Fullscreen fallback logic
- Back button visibility
- Controls child-friendly validation

**Expected Duration**: 2-3 minutes
**Failure Action**: Document known issues, fix if time allows

---

## Test Coverage Targets

Based on project standards from `docs/architecture/coding-standards.md`:

| Component | Target Coverage | Priority Threshold |
|---|---|---|
| Watch logging endpoint | 100% (safety-critical) | P0 tests must all pass |
| Unavailable endpoint | 100% (safety-critical) | P0 tests must all pass |
| Player component | 90% (business logic) | P1 tests should pass |
| Error handling | 90% (business logic) | P1 tests should pass |
| UI interactions | 70% (acceptable for UI) | P2 tests nice to have |

---

## Test Implementation Notes

### Backend Test Structure
**Location**: `tests/backend/routes/`

```python
# tests/backend/routes/test_watch_logging.py
@pytest.mark.tier1
def test_watch_logging_records_utc_timestamp():
    """2.2-INT-002: Verify UTC timestamp recorded"""
    # Arrange: Create test video
    # Act: Log watch via POST /api/videos/watch
    # Assert: watched_at is UTC timestamp
```

### Frontend Test Structure
**Location**: `frontend/src/child/player.test.js`

```javascript
// frontend/src/child/player.test.js
describe('ESC key behavior', () => {
  it('2.2-UNIT-015: ESC key does NOT call watch API', () => {
    // Arrange: Create player with mock API
    // Act: Trigger ESC key event
    // Assert: Watch API not called
  });
});
```

### E2E Test Structure
**Location**: `tests/e2e/specs/video-playback.spec.js`

```javascript
// tests/e2e/specs/video-playback.spec.js
test('2.2-E2E-012: Complete flow to grace state', async ({ page }) => {
  // Arrange: Set daily limit to 5 minutes
  // Act: Watch videos until limit reached
  // Assert: Redirected to /grace
});
```

---

## Quality Gate YAML Block

```yaml
test_design:
  story: "2.2"
  date: "2025-10-25"
  designer: "Quinn (Test Architect)"

  scenarios_total: 47

  by_level:
    unit: 23
    integration: 21
    e2e: 14

  by_priority:
    p0: 24
    p1: 18
    p2: 5
    p3: 0

  tier1_tests:
    total: 16
    unit: 2
    integration: 12
    e2e: 2

  coverage_targets:
    watch_logging: "100% (safety-critical)"
    unavailable_endpoint: "100% (safety-critical)"
    player_component: "90% (business logic)"
    error_handling: "90% (business logic)"
    ui_interactions: "70% (acceptable)"

  coverage_gaps: []

  risk_mitigation:
    - risk: "Time limit bypass"
      tests: ["2.2-INT-002", "2.2-INT-003", "2.2-INT-004", "2.2-INT-005", "2.2-INT-016", "2.2-INT-017", "2.2-INT-018", "2.2-INT-019", "2.2-UNIT-015", "2.2-INT-011"]
    - risk: "Unavailable videos shown"
      tests: ["2.2-INT-012", "2.2-INT-013"]
    - risk: "Inaccurate duration tracking"
      tests: ["2.2-INT-004", "2.2-INT-005", "2.2-INT-020", "2.2-INT-021"]

  execution_order:
    phase1: "P0 Unit (fail fast)"
    phase2: "P0 Integration (core validation)"
    phase3: "P0 E2E (user journey)"
    phase4: "P1 All levels (core functionality)"
    phase5: "P2 All levels (UX enhancement)"

  blocking_criteria:
    deployment_blocker: "All P0 tests must pass (24 scenarios)"
    release_candidate: "All P1 tests should pass (18 scenarios)"
    known_issues_acceptable: "P2 test failures can be documented"
```

---

## Validation Checklist

Before finalizing this test design, verified:

- ✅ **Every AC has test coverage** - All 12 ACs have multiple test scenarios
- ✅ **Test levels are appropriate** - Shift-left principle applied (unit → integration → E2E)
- ✅ **No duplicate coverage** - Each test validates unique aspect or level
- ✅ **Critical paths have multiple levels** - Safety-critical features have unit + integration + E2E
- ✅ **Priorities align with business risk** - P0 focuses on child safety and time limits
- ✅ **Test IDs follow convention** - Format: `2.2-{LEVEL}-{SEQ}`
- ✅ **Scenarios are atomic** - Each test validates single concern
- ✅ **TIER 1 tests identified** - 16 safety-critical tests marked

---

## Key Principles Applied

1. **Shift Left**: 38% unit tests catch issues early
2. **Risk-Based**: 51% P0 tests focus on safety-critical functionality
3. **Efficient Coverage**: Each test validates unique aspect at appropriate level
4. **Maintainability**: Clear test IDs and justifications for future reference
5. **Fast Feedback**: P0 unit tests execute in <5 seconds

---

## References

- **Test Levels Framework**: `.bmad-core/data/test-levels-framework.md`
- **Test Priorities Matrix**: `.bmad-core/data/test-priorities-matrix.md`
- **Story File**: `docs/stories/2.2.video-playback.md`
- **Coding Standards**: `docs/architecture/coding-standards.md`
- **Test Strategy**: `docs/architecture/test-strategy-and-standards.md`

---

**Test Design Complete**
Ready for implementation and quality gate review.
